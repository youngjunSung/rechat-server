"use strict";(self.webpackChunksleact_ts_front=self.webpackChunksleact_ts_front||[]).push([[928],{37916:(e,t,n)=>{n.d(t,{A:()=>o});var l=n(37115),a=n(96540),r={};const o=function(e){var t=(0,a.useCallback)((function(){e&&(r[e].disconnect(),delete r[e])}),[e]);return e?(r[e]||(r[e]=l.Ay.connect("".concat("http://localhost:3095","/ws-").concat(e),{transports:["websocket"]})),[r[e],t]):[void 0,t]}},22928:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var l=n(96540),a=n(47767),r=n(84976),o=n(72505),c=n.n(o),i=n(59324),s=n(53240),m=n(63032),u=n(93365),p=n.n(u),f=n(77698),x=n(89737),d=n(22477),h=n(58763),E=n(88574),b=n(72907),y=n(71543),g=n(16048),w=n(15094),A=n(37916),k=n(17451),v=n(92183);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l,a,r,o,c=[],i=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(l=r.call(n)).done)&&(c.push(l.value),c.length!==t);i=!0);}catch(e){s=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=Array(t);n<t;n++)l[n]=e[n];return l}const S=function(){var e=(0,a.g)(),t=C((0,A.A)(e.workspace),2),n=t[0],o=t[1],u=(0,i.Ay)("/api/users",s.A),N=u.data,S=(u.error,u.mutate),_=(0,i.Ay)("/api/workspaces",s.A),j=(_.data,_.error,_.mutate,(0,i.Ay)("/api/workspaces/".concat(e.workspace,"/channels"),s.A)),O=j.data,G=(j.error,j.mutate),L=(0,i.Ay)("/api/workspaces/".concat(e.workspace,"/members"),s.A),z=L.data,M=(L.error,L.mutate),$=(0,i.Ay)(e.channel?"/api/workspaces/".concat(e.workspace,"/channels/").concat(e.channel,"/members"):null,s.A),I=($.data,$.error,$.mutate,C((0,w.G)(""),3)),P=I[0],T=I[1],U=I[2],W=C((0,w.G)(""),3),B=(W[0],W[1],W[2],C((0,w.G)(""),3)),D=B[0],F=B[1],R=B[2],q=C((0,w.G)(""),3),H=q[0],J=q[1],K=q[2],Q=C((0,w.G)(""),3),V=Q[0],X=Q[1],Y=Q[2],Z=C((0,l.useState)([]),2),ee=Z[0],te=Z[1],ne=C((0,l.useState)(null),2),le=ne[0],ae=ne[1],re=Boolean(le),oe=C((0,l.useState)(null),2),ce=oe[0],ie=oe[1],se=Boolean(ce),me=function(){ie(null)},ue=C((0,l.useState)(!1),2),pe=ue[0],fe=ue[1],xe=function(){fe(!1)},de=C((0,l.useState)(!1),2),he=de[0],Ee=de[1],be=function(){Ee(!1)},ye=C((0,l.useState)(!1),2),ge=ye[0],we=ye[1],Ae=function(){we(!1)},ke=(0,l.useCallback)((function(){H&&H.trim()&&V&&V.trim()&&c().post("/api/workspaces",{workspace:H,url:V},{withCredentials:!0}).then((function(){S(),xe(),J(""),X("")})).catch((function(e){console.log(e)}))}),[H,V]),ve=(0,l.useCallback)((function(){P&&P.trim()&&c().post("/api/workspaces/".concat(e.workspace,"/members"),{email:P},{withCredentials:!0}).then((function(){M(),me(),be(),T("")})).catch((function(e){console.log(e)}))}),[P]),Ce=(0,l.useCallback)((function(){D&&D.trim()&&c().post("/api/workspaces/".concat(e.workspace,"/channels"),{name:D},{withCredentials:!0}).then((function(){G(),me(),Ae(),F("")})).catch((function(e){console.log(e)}))}),[D]),Ne=(0,l.useCallback)((function(e){c().post("/api/users/logout",null,{withCredentials:!0}).then((function(){S()}))}),[]);return(0,l.useEffect)((function(){O&&N&&n&&n.emit("login",{id:N.id,channels:O})}),[O,N,n]),(0,l.useEffect)((function(){return function(){o()}}),[e.workspace,o]),(0,l.useEffect)((function(){return null==n||n.on("onlineList",(function(e){te(e)})),function(){null==n||n.off("onLineList")}}),[n]),console.log(n),N?l.createElement("div",{className:"flex flex-col h-full bg-primary"},l.createElement("header",{className:"flex items-center min-h-[50px] py-[6px] px-[15px]"},l.createElement("button",{type:"button",onClick:Ne,className:"ml-auto center p-[6px]"},l.createElement(k.A,{className:"text-white"}))),l.createElement("main",{className:"flex flex-1 min-h-0"},l.createElement("div",{className:"flex flex-col shrink-0 items-center py-[14px] px-[6px] w-[70px]"},N.Workspaces.map((function(e){return l.createElement(r.N_,{key:e.id,to:"/workspace/".concat(e.name,"/channel/일반"),type:"button",className:"flex justify-center items-center rounded-[6px] bg-[#ababad] text-black text-[20px] font-bold w-[36px] h-[36px] [&:not(:last-child)]:mb-[20px]"},e.name.slice(0,1).toUpperCase())})),l.createElement("button",{type:"button",onClick:function(){fe(!0)},className:"flex justify-center items-center rounded-[6px] text-black text-[20px] font-bold w-[36px] h-[36px] [&:not(:last-child)]:mb-[20px]"},l.createElement(m.FW,{width:20,height:20,color:"#fff"})),l.createElement(f.A,{open:pe,onClose:xe,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.createElement(x.A,{id:"alert-dialog-title"},l.createElement("span",{className:"text-[18px] text-primary font-bold"},"워크스페이스 생성")),l.createElement(d.A,null,l.createElement(g.A_,{label:"워크스페이스 이름",type:"email",value:H,onChange:K}),l.createElement(g.A_,{label:"워크스페이스 URL",value:V,onChange:Y})),l.createElement(h.A,null,l.createElement(g.$n,{text:"생성하기",onClick:ke}))),l.createElement("button",{type:"button",onClick:function(e){ae(e.currentTarget)},className:"flex items-center justify-center mt-auto rounded-[4px] overflow-hidden"},l.createElement("img",{src:p().url(N.email,{s:"36px",d:"retro"}),alt:""})),l.createElement(E.A,{anchorEl:le,open:re,onClose:function(){ae(null)},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:-10},sx:{"& .MuiPaper-root":{width:300}}},l.createElement(b.A,null,l.createElement("img",{src:p().url(N.email,{s:"36px",d:"retro"}),alt:"",className:"rounded-[4px]"}),l.createElement("div",{className:"pl-[10px]"},l.createElement("p",null,N.nickname),l.createElement("p",null,"Active"))),l.createElement(y.A,null),l.createElement(b.A,null,"Profile"),l.createElement(b.A,null,"Setting"),l.createElement(y.A,null),l.createElement(b.A,{onClick:Ne},l.createElement("p",null,"Logout")))),l.createElement("article",{className:"flex flex-1 mb-[5px] mr-[5px] rounded-[8px] overflow-hidden"},l.createElement("div",{className:"flex flex-col bg-[#f9edff1c] w-[320px]"},l.createElement("div",{className:"py-[16px] px-[20px]"},l.createElement("button",{type:"button",onClick:function(e){ie(e.currentTarget)},className:"text-[18px] font-bold text-white"},"Work Space ",l.createElement(v.A,null)),l.createElement(E.A,{anchorEl:ce,open:se,onClose:me,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:-10,horizontal:"left"},sx:{"& .MuiPaper-root":{width:280}}},l.createElement(b.A,null,"Sleact"),l.createElement(b.A,{onClick:function(){Ee(!0)}},"워크스페이스에 사용자 초대하기"),l.createElement(f.A,{open:he,onClose:be,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.createElement(x.A,{id:"alert-dialog-title"},l.createElement("span",{className:"text-[18px] text-primary font-bold"},"사용자 초대")),l.createElement(d.A,null,l.createElement(g.A_,{label:"이메일",type:"email",value:P,onChange:U})),l.createElement(h.A,null,l.createElement(g.$n,{text:"초대하기",onClick:ve}))),l.createElement(b.A,{onClick:function(){we(!0)}},"채널 만들기"),l.createElement(f.A,{open:ge,onClose:Ae,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.createElement(x.A,{id:"alert-dialog-title"},l.createElement("span",{className:"text-[18px] text-primary font-bold"},"채널 생성")),l.createElement(d.A,null,l.createElement(g.A_,{label:"워크스페이스 이름",type:"text",value:D,onChange:R})),l.createElement(h.A,null,l.createElement(g.$n,{text:"생성하기",onClick:Ce}))))),l.createElement("div",{className:"flex-1 overflow-auto pb-[16px] px-[20px]"},l.createElement("details",{className:"group",open:!0},l.createElement("summary",{className:"flex items-center cursor-pointer py-[6px] text-[14px] text-white font-normal pl-[6px]"},l.createElement(m.n7,{width:10,height:10,color:"#fff",className:"mr-[8px] rotate-[-90deg] group-open:rotate-[0deg] transition-all"})," ","Channels"),l.createElement("div",{className:"flex flex-col ml-[26px]"},null==O?void 0:O.map((function(e,t){return l.createElement(r.k2,{key:e.id,to:"channel/".concat(e.name),className:function(e){return e.isActive?"py-[4px] text-[14px] text-white text-left font-bold underline":"py-[4px] text-[14px] text-white text-left font-normal"}},"# ",e.name)})))),l.createElement("details",{className:"group",open:!0},l.createElement("summary",{className:"flex items-center cursor-pointer py-[6px] text-[14px] text-white font-normal pl-[6px]"},l.createElement(m.n7,{width:10,height:10,color:"#fff",className:"mr-[8px] rotate-[-90deg] group-open:rotate-[0deg] transition-all"})," ","Direct Messages"),l.createElement("div",{className:"flex flex-col ml-[26px]"},null==z?void 0:z.map((function(e,t){return l.createElement(r.N_,{key:e.id,to:"dm/".concat(e.id),className:"flex items-center py-[4px] text-[14px] text-white font-normal text-left"},l.createElement("span",{className:"w-[8px] h-[8px] mr-[4px] rounded-full border border-white ".concat(ee.includes(e.id)&&"bg-[#69ff37] border-none")}),e.nickname)})))))),l.createElement("div",{className:"flex flex-col flex-1 overflow-auto bg-white"},l.createElement(a.sv,null))))):l.createElement(a.C5,{to:"/"})}}}]);